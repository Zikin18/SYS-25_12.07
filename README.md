# Домашнее задание к занятию «Репликация и масштабирование. Часть 2» - Юрий Белобородов


### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

*Дайте ответ в свободной форме.*

Ответ:
1) "активный master-сервер и пассивный репликационный slave-сервер".
Такая конфигурация позволяет повысить надежность за счет того что на slave-сервере реплицируется резервная копия master-сервера и определенной настройке повышается отказоустойчивость.
Так же можно распределить нагрузку между серверами таким образом чтобы на master происходила зпись, на slave чтение.

3) "master-сервер и несколько slave-серверов".
Такая конфигурация позволяет позволяет дополнительно увеличить прозводительность за счет того, что можно читать данные не с одного сервера, а с нескольких, что снимает нагрузку на основной сервер. Так же наличие нескольких slave-серверов позволяет распределить на них разные ресурсоемкие задачи либо же использовать их как тестовые сервера, чтобы не нагружать основной сервер и не беспокоиться за работу всего приложения.

4) "активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD)".
DRBD (Distributed Replicated Block Device — распределённое реплицируемое блочное устройство) представляет собой распределенное, гибкое и универсально реплицируемое решение хранения данных для Linux. Оно отражает содержимое блочных устройств, таких как жесткие диски, разделы, логические тома и т.д. между серверами. Оно создает копии данных на двух устройствах хранения для того, чтобы в случае сбоя одного из них можно было использовать данные на втором.

5) "SAN-кластер".
Позволяет подлючать внешние устройства хранения к серверам, что позволяет: 
   - улучшить производительность; 
   - улучшить масштабируемость хранилища; 
   - повысить отказоустойчивость и уменьшить время простоя в случае сбоев.


### Задание 2

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

Ответ:

Для вертикального шардинга таблицы User, Book и Store были вынесены в разные бд. При таком варианте шардинга усложняется выполнение связей между таблицами - связывание должно будет происходить на стороне клиента.

Для горизонтального шардинга таблица Book была разделена на две разные базы данных. При таком разделении схемы этих двух таблиц полностью совпадают, но при этом содержат разные данные. Например книги с Id меньшим или равным 1000000 будут храниться в Db_Books_1, а книги с Id большим чем 1000000 будут храниться в Db_Books_2. Это позволяет распределить нагрузку и занимаемое место между серверами. Логику выбора из какой конкретно БД брать данные о нужной книге так же придется реализовывать в приложении. 

Блок-схема

![2-1_sheme.png](https://github.com/Zikin18/SYS-25_12.07/blob/master/2-1_sheme.png)
